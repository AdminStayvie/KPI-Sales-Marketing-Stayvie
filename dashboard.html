<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI Dashboard - Stayie Dinoyo Hotel Prime</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* <<< CSS BARU UNTUK MODAL >>> */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal-content {
            background-color: var(--color-surface);
            padding: var(--space-24);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 500px;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-16);
        }
        .modal-header h3 {
            margin: 0;
        }
        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <!-- Main App -->
    <div id="mainApp" class="page">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>KPI Dashboard - <span id="userDisplayName"></span></h1>
                <div class="header-actions">
                    <span id="currentDateTime"></span>
                    <button id="logoutBtn" class="btn btn--outline btn--sm">Logout</button>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-content">
                <div class="nav-section">
                    <h3>Menu Utama</h3>
                    <ul class="nav-list">
                        <li><a href="#" data-page="dashboard" class="nav-link active">Dashboard</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h3>Filter Periode</h3>
                    <div class="form-group" style="padding: 0 var(--space-12);">
                        <label for="yearFilter" class="form-label">Tahun</label>
                        <select id="yearFilter" class="form-control" style="width: 100%;"></select>
                    </div>
                    <div class="form-group" style="padding: 0 var(--space-12);">
                        <label for="periodFilter" class="form-label">Periode</label>
                        <select id="periodFilter" class="form-control" style="width: 100%;"></select>
                    </div>
                </div>
                <div class="nav-section sales-only">
                    <h3>Input KPI</h3>
                    <ul class="nav-list">
                        <li><a href="#" data-page="input-lead" class="nav-link">Input Lead</a></li>
                        <li><a href="#" data-page="upload-canvasing" class="nav-link">Upload Meeting Canvasing</a></li>
                        <li><a href="#" data-page="upload-promosi" class="nav-link">Upload Promosi Campaign</a></li>
                        <li><a href="#" data-page="door-to-door" class="nav-link">Door-to-door</a></li>
                        <li><a href="#" data-page="quotation" class="nav-link">Quotation</a></li>
                        <li><a href="#" data-page="survey-coliving" class="nav-link">Survey Co-Living</a></li>
                        <li><a href="#" data-page="laporan-mingguan" class="nav-link">Laporan Mingguan</a></li>
                        <li><a href="#" data-page="crm-survey" class="nav-link">CRM Survey Kompetitor</a></li>
                        <li><a href="#" data-page="konversi-venue" class="nav-link">Konversi Booking Venue</a></li>
                        <li><a href="#" data-page="event-networking" class="nav-link">Event/Networking</a></li>
                        <li><a href="#" data-page="launch-campaign" class="nav-link">Launch Campaign</a></li>
                    </ul>
                </div>
                <div class="nav-section management-only">
                    <h3>Administrasi</h3>
                    <ul class="nav-list">
                        <li><a href="#" data-page="administrasi" class="nav-link">Pengaturan KPI</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content (Sekarang berisi semua halaman) -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="content-page active">
                <div class="page-header">
                    <h2>Dashboard KPI</h2>
                </div>
                <div class="kpi-grid">
                    <div class="card kpi-card"><div class="card__body"><h3>Target Harian</h3><div class="kpi-progress"><div class="progress-bar"><div class="progress-fill" id="dailyProgress"></div></div><span id="dailyPercentage">0%</span></div><div class="kpi-details"><span id="dailyAchieved">0</span> / <span id="dailyTotal">0</span></div></div></div>
                    <div class="card kpi-card"><div class="card__body"><h3>Target Mingguan</h3><div class="kpi-progress"><div class="progress-bar"><div class="progress-fill" id="weeklyProgress"></div></div><span id="weeklyPercentage">0%</span></div><div class="kpi-details"><span id="weeklyAchieved">0</span> / <span id="weeklyTotal">0</span></div></div></div>
                    <div class="card kpi-card"><div class="card__body"><h3>Target Bulanan</h3><div class="kpi-progress"><div class="progress-bar"><div class="progress-fill" id="monthlyProgress"></div></div><span id="monthlyPercentage">0%</span></div><div class="kpi-details"><span id="monthlyAchieved">0</span> / <span id="monthlyTotal">0</span></div></div></div>
                    <div class="card penalty-card"><div class="card__body"><h3>Total Denda</h3><div class="penalty-amount" id="totalPenalty">Rp 0</div></div></div>
                </div>
                <div class="card target-details"><div class="card__body"><h3>Detail Target</h3><div id="targetBreakdown"></div></div></div>
            </div>

            <!-- Input Lead Page -->
            <div id="input-lead" class="content-page">
                <div class="page-header"><h2>Input Lead</h2></div>
                <div class="form-container">
                    <form id="leadForm" class="kpi-form" data-sheet-name="Leads">
                        <div class="form-group"><label class="form-label">Nama Customer / Perusahaan</label><input type="text" name="customerName" class="form-control" required></div>
                        <div class="form-group"><label class="form-label">Sumber Lead</label><select name="leadSource" class="form-control" required><option value="">Pilih Sumber</option><option value="Cekat">Cekat</option><option value="Sosmed">Sosmed</option><option value="Walk-in">Walk-in</option><option value="Canvasing">Canvasing</option></select></div>
                        <div class="form-group"><label class="form-label">Produk yang Diminati</label><select name="product" class="form-control" required><option value="">Pilih Produk</option><option value="Kamar Hotel">Kamar Hotel</option><option value="Venue">Venue</option><option value="Co-Living">Co-Living</option><option value="Package">Package</option></select></div>
                        <div class="form-group"><label class="form-label">No Kontak (HP/Email)</label><input type="text" name="contact" class="form-control" required></div>
                        <div class="form-group"><label class="form-label">Catatan Awal</label><textarea name="notes" class="form-control" rows="3" placeholder="Contoh: cold/warm/hot"></textarea></div>
                        <button type="submit" class="btn btn--primary">Simpan Lead</button>
                    </form>
                </div>
                <div class="data-summary">
                    <!-- <<< PERUBAHAN: Judul tabel diubah >>> -->
                    <h3>Semua Data Leads</h3>
                    <div id="leadsSummary" class="summary-table"></div>
                </div>
            </div>

            <!-- Halaman Input Lainnya (tidak berubah) -->
            <!-- ... (kode halaman input lainnya tetap sama) ... -->
        </main>
    </div>

    <!-- <<< BARU: Modal untuk Update Status Lead >>> -->
    <div id="updateLeadModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update Status Lead</h3>
                <button class="close-button" onclick="closeModal()">&times;</button>
            </div>
            <form id="updateLeadForm">
                <input type="hidden" id="updateLeadId" name="id">
                <div class="form-group">
                    <label class="form-label">Customer</label>
                    <p id="modalCustomerName" style="font-weight: bold;"></p>
                </div>
                <div class="form-group">
                    <label for="updateStatus" class="form-label">Ubah Status Menjadi</label>
                    <select id="updateStatus" name="status" class="form-control" required>
                        <option value="Prospect">Prospect</option>
                        <option value="Deal">Deal</option>
                        <option value="Lost">Lost</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="updateNotes" class="form-label">Catatan Update</label>
                    <textarea id="updateNotes" name="updateNotes" class="form-control" rows="3" required></textarea>
                </div>
                <div style="display: flex; justify-content: flex-end; gap: 8px;">
                    <button type="button" class="btn btn--secondary" onclick="closeModal()">Batal</button>
                    <button type="submit" class="btn btn--primary">Simpan Perubahan</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
